## Iniciar Proyecto

docker rm -f book users borrow notification

# Construir contenedores
docker compose build

# Levantar servicios
docker compose up



## Acceso a la base de datos (PostgreSQL en Docker)

docker exec -it postgres-db psql -U postgres -d users

Consultas √∫tiles:

```sql
SELECT * FROM users ORDER BY id;
SELECT * FROM books ORDER BY id;
SELECT * FROM borrowings order by id;
```

---

## üîπ USERS Microservicio

Base URL: `http://localhost:8081/users`

### Obtener usuario por ID

* **M√©todo**: `GET`
* **Ejemplo**:
  `http://localhost:8081/users/2`

###  Crear nuevo usuario

* **M√©todo**: `POST`
* **URL**: `http://localhost:8081/users`
* **JSON**:

```json
{
  "name": "Antonio",
  "lastname": "Gonz√°lez",
  "phonenumber": "956235713",
  "email": "antonio@example.com"
}
```

---

## üîπ BOOKS Microservicio

Base URL: `http://localhost:8082/books`

### Obtener libro por ID

* **M√©todo**: `GET`
* **Ejemplo**: `http://localhost:8082/books/2`

### Listar todos los libros

* **M√©todo**: `GET`
* **URL**: `http://localhost:8082/books`

### Crear nuevo libro

* **M√©todo**: `POST`
* **URL**: `http://localhost:8082/books`
* **JSON**:

```json
{
  "title": "Clean Code 3",
  "author": "Robert C. Martin",
  "isbn": "9780132350884",
  "available": true
}
```

### Cambiar disponibilidad de un libro

* **M√©todo**: `PATCH`
* **URL**: `http://localhost:8082/books/{id}/availability`
* **Ejemplo**: `http://localhost:8082/books/1/availability`
* **JSON**:

```json
{
  "available": false
}
```

---

## üîπ BORROWING Microservicio

Base URL: `http://localhost:8083/borrowings`

###  Crear nuevo pr√©stamo

* **M√©todo**: `POST`
* **URL**: `http://localhost:8083/borrowings`
* **JSON**:

```json
{
  "userId": 2,
  "bookId": 5
}
```

### Obtener pr√©stamos por usuario

* **M√©todo**: `GET`
* **Ejemplo**:
  `http://localhost:8083/borrowings/user/2`

### Devolver libro

* **M√©todo**: `PATCH`
* **Ejemplo**:
  `http://localhost:8083/borrowings/10/return`

### Obtener todos los pr√©stamos

* **URL**: `http://localhost:8083/borrowings`

---

## Apache Kafka + Zookeeper

### Iniciar Zookeeper

bash
cd c:\kafka
bin\windows\zookeeper-server-start.bat config\zookeeper.properties


### Iniciar Kafka

bash
cd c:\kafka
bin\windows\kafka-server-start.bat config\server.properties



## Estructura de la Base de Datos (PostgreSQL)

 `users`, `books` y `borrowings`.

---

### üîπ Tabla `users`

| Columna       | Tipo           | Default                            |
| ------------- | -------------- | ---------------------------------- |
| `id`          | `bigint`       | `generated by default as identity` |
| `email`       | `varchar(255)` |                                    |
| `lastname`    | `varchar(20)`  |                                    |
| `name`        | `varchar(20)`  |                                    |
| `phonenumber` | `varchar(9)`   |                                    |

**√çndice:**

* `users_pkey` PRIMARY KEY (`id`)

---

### üîπ Tabla `books`

| Columna     | Tipo           | Default                             |
| ----------- | -------------- | ----------------------------------- |
| `id`        | `integer`      | `nextval('books_id_seq'::regclass)` |
| `title`     | `varchar(255)` |                                     |
| `author`    | `varchar(255)` |                                     |
| `isbn`      | `varchar(255)` |                                     |
| `available` | `boolean`      |                                     |

**√çndice:**

* `books_pkey` PRIMARY KEY (`id`)

---

### üîπ Tabla `borrowings`

| Columna       | Tipo                          | Default                                  |
| ------------- | ----------------------------- | ---------------------------------------- |
| `id`          | `integer`                     | `nextval('borrowings_id_seq'::regclass)` |
| `user_id`     | `bigint`                      |                                          |
| `book_id`     | `bigint`                      |                                          |
| `returned`    | `boolean`                     | `false`                                  |
| `borrowed_at` | `timestamp without time zone` |                                          |
| `due_date`    | `timestamp without time zone` |                                          |
| `returned_at` | `timestamp without time zone` |                                          |

**√çndice:**

* `borrowings_pkey` PRIMARY KEY (`id`)

-----------------------------------------------------------------------------------------------
ultimos logs 
docker logs --tail 10 com.pedro.notification
